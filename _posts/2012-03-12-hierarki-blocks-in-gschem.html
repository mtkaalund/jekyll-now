---
layout: post
title: Hierarki Blocks in gSchem
date: '2012-03-12T14:56:00.000-07:00'
author: MTKaalund
tags:
- geda
- script
- gschem
modified_time: '2012-03-14T02:26:27.621-07:00'
thumbnail: http://1.bp.blogspot.com/-tiT9ezRYJ8U/T15j-eLqLJI/AAAAAAAAH6s/RJYAN7x-jrA/s72-c/gtag1.png
blogger_id: tag:blogger.com,1999:blog-2855698641636925797.post-8734977183404333980
blogger_orig_url: http://www.mtkaalund.dk/2012/03/hierarki-blocks-in-gschem.html
---

So, hierarki block in gschem, is not that easy as in other EDA tools.<br />First you have to create the subcircuit, and then you have to create the symbol, that you then can put in your overview circuit.<br /><br />This is a feature that is quite&nbsp;useful, as then you can create a modular circuit, this mean that if you have a circuit that you will reuse, or if you just want a better overview over of your diagram.<br /><br />For example, take a look at the <b>gTAG</b> circuit from the <b>geda-example</b> package on my machine it is located, at <b>/usr/share/doc/geda-examples/examples/gTAG</b> :<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-tiT9ezRYJ8U/T15j-eLqLJI/AAAAAAAAH6s/RJYAN7x-jrA/s1600/gtag1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="452" src="http://1.bp.blogspot.com/-tiT9ezRYJ8U/T15j-eLqLJI/AAAAAAAAH6s/RJYAN7x-jrA/s640/gtag1.png" width="640" /></a></div>Of course&nbsp;I use this example, because this a uses hierarki block schematic, but as you can see this is useful when you have a big schematic, to put you circuit into smaller section. Or if you just want to reuse an "old" schematic.<br />The blocks attributes is shown on the following picture:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-9aXGFsvhgZY/T15s4qKGALI/AAAAAAAAH64/PtubjLIeFdg/s1600/gtag3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="162" src="http://3.bp.blogspot.com/-9aXGFsvhgZY/T15s4qKGALI/AAAAAAAAH64/PtubjLIeFdg/s320/gtag3.png" width="320" /></a></div>As we can see it has an attribute called "<b>source</b>" which directs it to "<b>gTAG-psu.sch</b>", this directs the gschem to the circuit represented by the symbol called, "<b>gTAG-psu</b>".<br />So if we want our schematic to have this hierarki blocks, then we need to create a symbol and a schematic before we can add it the overview schematic.<br />Hopeful some day, an feature to gschem is added, so you just can draw an square, slap some pins on it and it will create the symbol and underlying schematic, with the inputs and output in it.<br /><br />But until further, I have created a script that, takes an schematic and creates a block symbol from it. There is some limits on this scripts, so I will name them here:<br /><br /><ul><li>Use of symbol: "in-1.sym" to indicate a input port</li><li>Use of symbol: "out-1.sym" to indicate a output port</li></ul><div>This scripts, will create a file called "yournameofsch.src", this file is a tragesym file, that then is need to be put through "tragesym" to create the symbol for your circuit.</div><div>Add this symbol to your schematic, open the attributes for this symbol, and add "<b>source=yournameofsch.src</b>" to it. This is so that it points to your circuit.&nbsp;</div><div>Then you should be done, do this for all your subcircuits.</div><div><br /></div><div>Just a warning, this script is not mean to be a&nbsp;permanent solution, this is only a&nbsp;temporary solution for this. I am also currently working on a new version, that does not rely on "tragesym" to create the symbol, but could take awhile before this is done.&nbsp;&nbsp;&nbsp;</div><div><br /></div><div>The script can be found on github:&nbsp;<a href="https://github.com/mtkaalund/gSchem-Hierarki-Block-Symbol-Creater">https://github.com/mtkaalund/gSchem-Hierarki-Block-Symbol-Creater</a></div><div><br /></div><div>Hopes this help somebody</div>
---
layout: post
title: D-Link SharePoint for Ubuntu
date: '2012-07-25T17:17:00.001-07:00'
author: MTKaalund
tags:
- Network
- Ubuntu
- disk
- linux
- printer
- D-link
- usb
- SharePoint
modified_time: '2012-07-25T17:46:43.832-07:00'
blogger_id: tag:blogger.com,1999:blog-2855698641636925797.post-6838306515972179308
blogger_orig_url: http://www.mtkaalund.dk/2012/07/d-link-sharepoint-for-ubuntu.html
---

So I bought a new router and this one is a D-Link DIR-657 and it has one has the abillity to have a usb printer or harddisk connected to it. Something I would like to use, but there is a problem I'm using Linux, since there is no software for it from D-link and no help from D-link (non that I could find), I began to search for an answer to get it working on Ubuntu.<br /><br />I first found an forum post, that tried using FTP to access it, and from what I could read, they could'nt, but they had found some other post about it <a href="https://groups.google.com/forum/?fromgroups#!topic/linux.debian.user/Rof9rW0vg44" target="_blank">[Link 1]</a> <a href="http://www.mail-archive.com/debian-user@lists.debian.org/msg557452.html" target="_blank">[Link 2]</a>&nbsp;. The&nbsp;second&nbsp;link gave the most answer, it&nbsp;seams that the protocol used by the SharePoint software, is supported by <b>smbclient</b> and therefor can be connected to it by using <b>smbclient</b>.<br /><br />First I tried to connect to it as the second link says<br /><blockquote class="tr_bq"><pre><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">smbclient -L 192.168.0.1</span></pre></blockquote>But I got this reply from the router<br /><blockquote class="tr_bq"><span style="font-size: xx-small;"><span style="font-family: 'Courier New', Courier, monospace;">Domain=[WORKGROUP] OS=[Unix] Server=[Samba 3.0.24]</span><span style="font-family: 'Courier New', Courier, monospace;">Server requested LANMAN password (share-level security) but 'client lanman auth = no' or 'client ntlmv2 auth = yes'</span><span style="font-family: 'Courier New', Courier, monospace;">tree connect failed: NT_STATUS_ACCESS_DENIED</span></span></blockquote><div>So what to do other than read some documentation on smbclient, I found that by adding "<b>-U</b>" you could connect to is as an user, so I tried this also</div><blockquote class="tr_bq"><pre><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">smbclient -L 192.168.0.1 -U admin</span></pre></blockquote>But I got the same reply as before, then back to the documentation, found that by adding an "<b>-N</b>" instead of an "<b>-U</b>" you could specify that no user, that had to be tried<br /><blockquote class="tr_bq"><pre><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">smbclient -L 192.168.0.1 -N</span></pre></blockquote>&nbsp;And success, I got the list of devices on connected to it<br /><blockquote class="tr_bq"><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">Domain=[WORKGROUP] OS=[Unix] Server=[Samba 3.0.24]</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;"><br /></span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">Sharename &nbsp; &nbsp; &nbsp; Type &nbsp; &nbsp; &nbsp;Comment</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">--------- &nbsp; &nbsp; &nbsp; ---- &nbsp; &nbsp; &nbsp;-------</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">usb(A1) &nbsp; &nbsp; &nbsp; &nbsp; Disk &nbsp; &nbsp; &nbsp;Device(us) (LaCie,LaCie Device)</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">IPC$ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IPC &nbsp; &nbsp; &nbsp; IPC Service (D-Link DIR-657)</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">Domain=[WORKGROUP] OS=[Unix] Server=[Samba 3.0.24]</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;"><br /></span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">Server &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Comment</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">--------- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-------</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;"><br /></span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">Workgroup &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Master</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">--------- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-------</span></blockquote></blockquote>So now I wanted to connect to it, after installing cifs-utils (<b>sudo apt-get install cifs-utils</b>), I could mount it in a folder in my home directory. <br /><blockquote class="tr_bq"><div><span style="background-color: white;"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">mkdir $HOME/SharePoint</span></span></div></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">sudo mount.cifs //192.168.0.1/usb\(A1\) $HOME/SharePoint/</span></blockquote>Then so I added an file, and unmounted the directory looked at it, no file, mounted it again and the file was there, so It worked.<br />Now I would like to have it mounted at boot, then we need to add it to the <b>fstab</b> file. Since I can't remember how to do this, I found a site that contained this information [<a href="http://opensuse.swerdna.org/susesambacifs.html" target="_blank">Link 3</a>]<br /><blockquote class="tr_bq"><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;"># Network hdd on D-Link</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: xx-small;">//192.168.0.1/usb\(A1\) /home/kaalund/SharePoint <span class="Apple-tab-span" style="white-space: pre;"> </span>cifs<span class="Apple-tab-span" style="white-space: pre;"> </span>_netdev<span class="Apple-tab-span" style="white-space: pre;"> </span>0<span class="Apple-tab-span" style="white-space: pre;"> </span>0</span></blockquote></blockquote>Next to mount it, one could either reboot or use the mount command "<b>sudo mount -a</b>".<br /><br />So whats next, that somebody add a scripts that can do this from nautilus when a device like this on the network. But I don't think it is going to be me.